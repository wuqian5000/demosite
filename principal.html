<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>School Mental Health Dashboard</title>
    <!-- Include Chart.js library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <!-- Include your custom styles -->
    <style>
        /* Base styles */
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header styles */
        .header {
            background-color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            position: relative;
            /* Add this to allow absolute positioning of toggle buttons */
        }

        .dashboard-title {
            color: #9333ea;
            margin: 0;
            font-size: 1.5em;
        }

        .nav {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .nav-item {
            color: #9333ea;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .nav-item:hover {
            background-color: #f3e8ff;
        }

        /* View Toggle Container */
        #viewToggleContainer {
            position: absolute;
            right: 16px;
            top: 16px;
            z-index: 10;
            display: flex;
            gap: 8px;
        }

        /* Toggle Button Styles */
        .toggle-button {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            background-color: #f3f4f6;
            color: #4b5563;
            border: none;
            cursor: pointer;
        }

        .toggle-button:hover {
            background-color: #e5e7eb;
        }

        .toggle-button.active {
            background-color: #9333ea;
            color: white;
        }

        /* Dashboard grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        /* Stats cards */
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .card:hover {
            background-color: #f3e8ff;
        }

        .card-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5em;
            color: #9333ea;
        }

        .card-title {
            font-size: 1em;
            color: #666;
            margin-bottom: 10px;
        }

        .card-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .card-subtitle {
            font-size: 0.9em;
            color: #999;
        }

        /* Chart areas */
        .chart-area {
            background: white;
            padding: 20px;
            border-radius: 8px;
        }

        .chart-title {
            font-size: 1.2em;
            color: #666;
            margin-bottom: 15px;
            text-align: center;
        }

        .chart-wrapper {
            height: 400px;
            position: relative;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
        }

        .modal-content {
            background-color: #fff;
            margin: 5% auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 1.5em;
            color: #9333ea;
            margin: 0;
        }

        .close-button {
            font-size: 1.5em;
            color: #999;
            cursor: pointer;
            background: none;
            border: none;
        }

        .close-button:hover {
            color: #666;
        }

        /* Table styles */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .data-table th,
        .data-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid #eee;
            font-size: 0.9em;
        }

        .data-table th {
            background-color: #f8f8f8;
            color: #666;
            font-weight: 600;
        }

        /* Button styles */
        .button {
            background-color: #9333ea;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .button:hover {
            background-color: #7e22ce;
        }

        .alert-button {
            background-color: #ef4444;
            color: white;
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
        }

        .alert-button:hover {
            background-color: #dc2626;
        }

        /* Responsive adjustments */
        @media (min-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 3fr 2fr;
            }
        }
    </style>
</head>

<body>
    <div class="header">
        <h1 class="dashboard-title">School Mental Health Dashboard</h1>
        <!-- View Toggle Container -->
        <div id="viewToggleContainer"></div>
        <nav class="nav">
            <a href="#" class="nav-item">Profile</a>
            <a href="#" class="nav-item">Contact Us</a>
            <a href="#" class="nav-item">Logout</a>
        </nav>
    </div>

    <div class="dashboard-grid">
        <!-- Left Column -->
        <div>
            <!-- Stats Cards -->
            <div class="stats-cards">
                <div class="card" onclick="showActiveCases()">
                    <div class="card-icon">üë•</div>
                    <div class="card-title">Active Cases</div>
                    <div class="card-value" id="activeCasesCount">80</div>
                    <div class="card-subtitle">students currently receiving support</div>
                </div>

                <div class="card" onclick="showUrgentCases()">
                    <div class="card-icon">‚ö†Ô∏è</div>
                    <div class="card-title">Urgent Cases</div>
                    <div class="card-value" id="urgentCasesCount">12</div>
                    <div class="card-subtitle">requiring immediate attention</div>
                </div>

                <div class="card" onclick="showResponseTimes()">
                    <div class="card-icon">‚è±Ô∏è</div>
                    <div class="card-title">Response Time</div>
                    <div class="card-value" id="avgResponseTime">2.5 days</div>
                    <div class="card-subtitle">average counselor response</div>
                </div>

                <div class="card">
                    <div class="card-icon">üè´</div>
                    <div class="card-title">Total Students</div>
                    <div class="card-value" id="totalStudents">1200</div>
                    <div class="card-subtitle">enrolled in support programs</div>
                </div>
            </div>

            <!-- Charts -->
            <div class="chart-area">
                <div class="chart-title">Monthly Case Trends</div>
                <div class="chart-wrapper">
                    <canvas id="monthlyCasesChart"></canvas>
                </div>
            </div>

            <div class="chart-area">
                <div class="chart-title">Issue Distribution</div>
                <div class="chart-wrapper">
                    <canvas id="issueDistributionChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Right Column -->
        <div>
            <!-- You can add more content here if needed -->
        </div>
    </div>

    <!-- Modals -->
    <!-- Active Cases Modal -->
    <div id="activeCasesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Active Cases Overview</h2>
                <button class="close-button" onclick="closeModal('activeCasesModal')">&times;</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Student</th>
                        <th>Grade</th>
                        <th>Counselor</th>
                        <th>Last Session</th>
                        <th>Status</th>
                        <th>Next Session</th>
                    </tr>
                </thead>
                <tbody id="activeCasesTableBody">
                    <!-- Data will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Urgent Cases Modal -->
    <div id="urgentCasesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Urgent Cases</h2>
                <button class="close-button" onclick="closeModal('urgentCasesModal')">&times;</button>
            </div>
            <p style="color: #dc2626; font-weight: bold;">These cases require immediate attention and follow-up</p>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Student</th>
                        <th>Grade</th>
                        <th>Counselor</th>
                        <th>Issue</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="urgentCasesTableBody">
                    <!-- Data will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Response Times Modal -->
    <div id="responseTimesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Counselor Response Times</h2>
                <button class="close-button" onclick="closeModal('responseTimesModal')">&times;</button>
            </div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Counselor</th>
                        <th>Avg Response Time</th>
                        <th>Current Case Load</th>
                        <th>Urgent Cases</th>
                    </tr>
                </thead>
                <tbody id="responseTimesTableBody">
                    <!-- Data will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Monthly Details Modal -->
    <div id="monthlyDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="monthlyDetailsTitle">Case Details</h2>
                <button class="close-button" onclick="closeModal('monthlyDetailsModal')">&times;</button>
            </div>
            <button class="button" onclick="exportToExcel()">Export to Excel</button>
            <div id="monthlyDetailsContent">
                <!-- Data will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Issue Details Modal -->
    <div id="issueDetailsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="issueDetailsTitle">Issue Details</h2>
                <button class="close-button" onclick="closeModal('issueDetailsModal')">&times;</button>
            </div>
            <div id="issueDetailsContent">
                <!-- Data will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- JavaScript to handle charts and modals -->
    <script>
        // View switching functionality
        function initializeViewToggle() {
            const viewToggleContainer = document.getElementById('viewToggleContainer');
            const currentView = window.location.pathname.includes('principal') ? 'principal' : 'counselor';

            // Create toggle buttons
            viewToggleContainer.innerHTML = `
                <button 
                    onclick="switchView('counselor')" 
                    class="toggle-button ${currentView === 'counselor' ? 'active' : ''}">
                    Counselor View
                </button>
                <button 
                    onclick="switchView('principal')" 
                    class="toggle-button ${currentView === 'principal' ? 'active' : ''}">
                    Principal View
                </button>
            `;
        }

        function switchView(view) {
            // Switch to the appropriate view
            if (view === 'principal') {
                window.location.href = 'principal.html';
            } else {
                window.location.href = 'index.html';
            }
        }

        // Initialize the toggle buttons
        document.addEventListener('DOMContentLoaded', initializeViewToggle);

        // Existing JavaScript code for charts and modals

        // Sample data
        const stats = {
            totalActive: 80,
            urgentCases: 12,
            avgResponseTime: '2.5 days',
            totalStudents: 1200
        };

        const monthlyStats = [
            { month: 'Jan', cases: 45, resolved: 38, ongoing: 7 },
            { month: 'Feb', cases: 52, resolved: 43, ongoing: 9 },
            { month: 'Mar', cases: 48, resolved: 40, ongoing: 8 }
        ];

        const issueTypes = [
            { type: 'Anxiety', count: 25, color: 'rgb(200, 220, 240)' },
            { type: 'Depression', count: 20, color: 'rgb(135, 175, 225)' },
            { type: 'Stress', count: 15, color: 'rgb(70, 130, 180)' },
            { type: 'Behavioral', count: 12, color: 'rgb(245, 200, 200)' },
            { type: 'Other', count: 8, color: 'rgb(230, 150, 150)' }
        ];

        const activeCases = [
            { id: 1, student: "Alice Johnson", grade: "10th", counselor: "Dr. Smith", lastSession: "2024-03-15", status: "In Progress", nextSession: "2024-03-22" },
            { id: 2, student: "Bob Wilson", grade: "11th", counselor: "Dr. Brown", lastSession: "2024-03-14", status: "Scheduled", nextSession: "2024-03-21" }
        ];

        const urgentCases = [
            { id: 1, student: "Charlie Davis", grade: "9th", counselor: "Dr. Smith", issue: "Severe anxiety", status: "Immediate intervention", action: "Parent conference scheduled" },
            { id: 2, student: "Diana Miller", grade: "12th", counselor: "Dr. Brown", issue: "Crisis situation", status: "Under observation", action: "Daily check-ins" }
        ];

        const responseTimeData = [
            { counselor: "Dr. Smith", avgResponse: "2.1 days", currentLoad: 15, urgentCases: 3 },
            { counselor: "Dr. Brown", avgResponse: "2.8 days", currentLoad: 12, urgentCases: 2 }
        ];

        // Issue-specific student details with mock data
        const monthlyDetails = {
            Jan: {
                ongoing: [
                    { id: 1, student: "Alex Smith", grade: "9th", counselor: "Dr. Brown", startDate: "2024-01-05", lastSession: "2024-01-25", nextSession: "2024-02-01", status: "Active", notes: "Weekly sessions ongoing" },
                    { id: 2, student: "Sarah Johnson", grade: "11th", counselor: "Dr. Smith", startDate: "2024-01-10", lastSession: "2024-01-28", nextSession: "2024-02-04", status: "Active", notes: "Bi-weekly check-ins" }
                ],
                resolved: [
                    { id: 3, student: "Mike Wilson", grade: "10th", counselor: "Dr. Brown", startDate: "2024-01-03", resolvedDate: "2024-01-20", outcome: "Successfully completed therapy" },
                    { id: 4, student: "Emma Davis", grade: "12th", counselor: "Dr. Smith", startDate: "2024-01-07", resolvedDate: "2024-01-28", outcome: "Goals achieved" }
                ]
            },
            Feb: {
                ongoing: [
                    { id: 5, student: "Chris Lee", grade: "9th", counselor: "Dr. Smith", startDate: "2024-02-01", lastSession: "2024-02-22", nextSession: "2024-03-01", status: "Active", notes: "Making good progress" }
                ],
                resolved: [
                    { id: 6, student: "Lisa Park", grade: "10th", counselor: "Dr. Brown", startDate: "2024-02-05", resolvedDate: "2024-02-25", outcome: "Successfully transitioned to peer support group" }
                ]
            }
        };

        const issueDetails = {
            Anxiety: [
                {
                    id: 1,
                    student: "Grace Lee",
                    grade: "9th",
                    counselor: "Dr. Smith",
                    startDate: "2024-01-15",
                    status: "Active",
                    type: "Test Anxiety",
                    interventions: [
                        { date: "2024-01-15", action: "Initial assessment", notes: "Identified test-taking stress triggers" },
                        { date: "2024-02-01", action: "Coping strategies", notes: "Introduced breathing techniques" },
                        { date: "2024-02-15", action: "Progress review", notes: "Showing improvement in test preparation" }
                    ]
                },
                {

                    id: 2,

                    student: "Henry Davis",

                    grade: "12th",

                    counselor: "Dr. Brown",

                    startDate: "2024-02-01",

                    status: "Active",

                    type: "Social Anxiety",

                    interventions: [

                        { date: "2024-02-01", action: "Initial assessment", notes: "Difficulty with class presentations" },

                        { date: "2024-02-15", action: "Group therapy", notes: "Participated in small group session" },

                        { date: "2024-03-01", action: "Follow-up", notes: "Started using anxiety management tools" }

                    ]

                }

            ],

            Depression: [

                {

                    id: 3,

                    student: "Lily Evans",

                    grade: "10th",

                    counselor: "Dr. Brown",

                    startDate: "2024-01-20",

                    status: "Active",

                    type: "Major Depression",

                    interventions: [

                        { date: "2024-01-20", action: "Initial assessment", notes: "Persistent sadness and loss of interest" },

                        { date: "2024-02-05", action: "Therapy sessions", notes: "Weekly CBT sessions initiated" },

                        { date: "2024-02-20", action: "Medication referral", notes: "Referred to psychiatrist for evaluation" }

                    ]

                }

            ],

            Stress: [

                {

                    id: 4,

                    student: "Mark Johnson",

                    grade: "11th",

                    counselor: "Dr. Smith",

                    startDate: "2024-02-10",

                    status: "Active",

                    type: "Academic Stress",

                    interventions: [

                        { date: "2024-02-10", action: "Initial assessment", notes: "Overwhelmed by coursework" },

                        { date: "2024-02-17", action: "Time management training", notes: "Provided tools and resources" },

                        { date: "2024-02-24", action: "Follow-up", notes: "Improvement in task organization" }

                    ]

                }

            ],

            Behavioral: [

                {

                    id: 5,

                    student: "Emma Watson",

                    grade: "9th",

                    counselor: "Dr. Brown",

                    startDate: "2024-03-01",

                    status: "Active",

                    type: "Behavioral Issues",

                    interventions: [

                        { date: "2024-03-01", action: "Initial assessment", notes: "Disruptive in class" },

                        { date: "2024-03-08", action: "Behavioral plan", notes: "Set clear expectations and consequences" },

                        { date: "2024-03-15", action: "Parent meeting", notes: "Discussed behavior at home and school" }

                    ]

                }

            ],
            // ... other issues
            Other: [

                {

                    id: 6,

                    student: "Oliver Twist",

                    grade: "12th",

                    counselor: "Dr. Smith",

                    startDate: "2024-03-05",

                    status: "Active",

                    type: "Family Issues",

                    interventions: [

                        { date: "2024-03-05", action: "Initial assessment", notes: "Family conflict affecting school performance" },

                        { date: "2024-03-12", action: "Counseling sessions", notes: "Working on coping mechanisms" },

                        { date: "2024-03-19", action: "Resource referral", notes: "Provided community resources" }

                    ]

                }

            ]
        };

        // Populate stats
        document.getElementById('activeCasesCount').textContent = stats.totalActive;
        document.getElementById('urgentCasesCount').textContent = stats.urgentCases;
        document.getElementById('avgResponseTime').textContent = stats.avgResponseTime;
        document.getElementById('totalStudents').textContent = stats.totalStudents;

        // Functions to show modals
        function showActiveCases() {
            const tbody = document.getElementById('activeCasesTableBody');
            tbody.innerHTML = activeCases.map(case_ => `
                <tr>
                    <td>${case_.student}</td>
                    <td>${case_.grade}</td>
                    <td>${case_.counselor}</td>
                    <td>${case_.lastSession}</td>
                    <td>${case_.status}</td>
                    <td>${case_.nextSession}</td>
                </tr>
            `).join('');
            document.getElementById('activeCasesModal').style.display = 'block';
        }

        function showUrgentCases() {
            const tbody = document.getElementById('urgentCasesTableBody');
            tbody.innerHTML = urgentCases.map(case_ => `
                <tr>
                    <td>${case_.student}</td>
                    <td>${case_.grade}</td>
                    <td>${case_.counselor}</td>
                    <td>${case_.issue}</td>
                    <td>${case_.status}</td>
                    <td>${case_.action}</td>
                </tr>
            `).join('');
            document.getElementById('urgentCasesModal').style.display = 'block';
        }

        function showResponseTimes() {
            const tbody = document.getElementById('responseTimesTableBody');
            tbody.innerHTML = responseTimeData.map(data => `
                <tr>
                    <td>${data.counselor}</td>
                    <td>${data.avgResponse}</td>
                    <td>${data.currentLoad}</td>
                    <td>${data.urgentCases}</td>
                </tr>
            `).join('');
            document.getElementById('responseTimesModal').style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Chart configurations
        // Monthly Cases Chart
        const monthlyCasesCtx = document.getElementById('monthlyCasesChart').getContext('2d');
        const monthlyCasesChart = new Chart(monthlyCasesCtx, {
            type: 'bar',
            data: {
                labels: monthlyStats.map(item => item.month),
                datasets: [
                    {
                        label: 'Resolved Cases',
                        data: monthlyStats.map(item => item.resolved),
                        backgroundColor: '#4CAF50'
                    },
                    {
                        label: 'Ongoing Cases',
                        data: monthlyStats.map(item => item.ongoing),
                        backgroundColor: '#2196F3'
                    }
                ]
            },
            options: {
                onClick: (e, elements) => {
                    if (elements.length > 0) {
                        const index = elements[0].index;
                        const month = monthlyStats[index].month;
                        showMonthlyDetails(month);
                    }
                },
                responsive: true,
                scales: {
                    y: { beginAtZero: true }
                }
            }
        });

        function showMonthlyDetails(month) {
            if (!monthlyDetails[month]) return;
            document.getElementById('monthlyDetailsTitle').textContent = `Case Details - ${month}`;

            let content = '';

            if (monthlyDetails[month].ongoing.length > 0) {
                content += `
                    <h3>Ongoing Cases</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Student</th>
                                <th>Grade</th>
                                <th>Counselor</th>
                                <th>Last Session</th>
                                <th>Next Session</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${monthlyDetails[month].ongoing.map(case_ => `
                                <tr>
                                    <td>${case_.student}</td>
                                    <td>${case_.grade}</td>
                                    <td>${case_.counselor}</td>
                                    <td>${case_.lastSession}</td>
                                    <td>${case_.nextSession}</td>
                                    <td>${case_.notes}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            }

            if (monthlyDetails[month].resolved.length > 0) {
                content += `
                    <h3>Resolved Cases</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Student</th>
                                <th>Grade</th>
                                <th>Counselor</th>
                                <th>Start Date</th>
                                <th>Resolved Date</th>
                                <th>Outcome</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${monthlyDetails[month].resolved.map(case_ => `
                                <tr>
                                    <td>${case_.student}</td>
                                    <td>${case_.grade}</td>
                                    <td>${case_.counselor}</td>
                                    <td>${case_.startDate}</td>
                                    <td>${case_.resolvedDate}</td>
                                    <td>${case_.outcome}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            }

            document.getElementById('monthlyDetailsContent').innerHTML = content;
            document.getElementById('monthlyDetailsModal').style.display = 'block';
        }

        function exportToExcel() {
            alert('Exporting data to Excel...');
        }

        // Issue Distribution Chart
        const issueDistributionCtx = document.getElementById('issueDistributionChart').getContext('2d');
        const issueDistributionChart = new Chart(issueDistributionCtx, {
            type: 'bar',
            data: {
                labels: issueTypes.map(item => item.type),
                datasets: [{
                    label: 'Number of Cases',
                    data: issueTypes.map(item => item.count),
                    backgroundColor: issueTypes.map(item => item.color)
                }]
            },
            options: {
                indexAxis: 'y',
                onClick: (e, elements) => {
                    if (elements.length > 0) {
                        const index = elements[0].index;
                        const issue = issueTypes[index].type;
                        showIssueDetails(issue);
                    }
                },
                responsive: true,
                scales: {
                    x: { beginAtZero: true }
                },
                plugins: {
                    legend: { display: false }
                }
            }
        });

        function showIssueDetails(issue) {
            if (!issueDetails[issue]) return;
            document.getElementById('issueDetailsTitle').textContent = `${issue} Cases - Detailed View`;

            let content = issueDetails[issue].map(student => `
                <div class="chart-area">
                    <h3>${student.student} - Grade ${student.grade}</h3>
                    <p><strong>Counselor:</strong> ${student.counselor}</p>
                    <p><strong>Start Date:</strong> ${student.startDate}</p>
                    <p><strong>Status:</strong> ${student.status}</p>
                    <h4>Intervention History:</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Action</th>
                                <th>Notes</th>
                                <th>Alert</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${student.interventions.map(intervention => `
                                <tr>
                                    <td>${intervention.date}</td>
                                    <td>${intervention.action}</td>
                                    <td>${intervention.notes}</td>
                                    <td><button class="alert-button" onclick="raiseAlert('${student.counselor}', '${student.student}')">Raise Alert</button></td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `).join('');

            document.getElementById('issueDetailsContent').innerHTML = content;
            document.getElementById('issueDetailsModal').style.display = 'block';
        }

        function raiseAlert(counselor, student) {
            alert(`Alert raised to ${counselor} regarding ${student}.`);
        }

        // Close modal when clicking outside of it
        window.onclick = function (event) {
            const modals = ['activeCasesModal', 'urgentCasesModal', 'responseTimesModal', 'monthlyDetailsModal', 'issueDetailsModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target == modal) {
                    modal.style.display = "none";
                }
            });
        }
    </script>
</body>

</html>